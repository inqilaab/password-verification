<!DOCTYPE html>
<html>
  <head>
    <title>Password Reset</title>
    <script src="https://download.playfab.com/PlayFabClientApi.js"></script>
  </head>
  <body>
    <h1>Password Reset</h1>
    <form>
      <label for="new-password">New Password:</label><br>
      <input type="password" id="new-password" name="new-password"><br>
      <label for="confirm-password">Confirm Password:</label><br>
      <input type="password" id="confirm-password" name="confirm-password"><br><br>
      <input type="submit" value="Submit">
    </form> 
    <script>
      document.querySelector('form').addEventListener('submit', (event) => {
        event.preventDefault();
        const newPassword = document.querySelector('#new-password').value;
        const confirmPassword = document.querySelector('#confirm-password').value;
        if (newPassword !== confirmPassword) {
          alert('Passwords do not match!');
          return;
        }
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        if (!token) {
          alert('Invalid token!');
          return;
        }
        PlayFabClientSDK.ResetPassword({
          Token: token,
          Password: newPassword
        }, (error, result) => {
          if (error) {
            alert('An error occurred while resetting the password!');
            return;
          }
          alert('Password reset successfully!');
        });
      });
    </script>
  </body>
</html>
